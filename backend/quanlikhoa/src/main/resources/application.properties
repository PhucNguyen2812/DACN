# ===================================================================
# CẤU HÌNH HỆ THỐNG QUẢN LÝ KHOA CÔNG NGHỆ THÔNG TIN
# ===================================================================
# File: application.properties
# Location: src/main/resources/application.properties
# Mô tả: File cấu hình chính cho ứng dụng Spring Boot
# ===================================================================

# ===================================================================
# SERVER CONFIGURATION
# ===================================================================
server.port=8080
server.servlet.context-path=/api
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# ===================================================================
# DATABASE - PostgreSQL Configuration
# ===================================================================
spring.datasource.url=jdbc:postgresql://localhost:5432/khoa_cntt_db
spring.datasource.username=postgres
spring.datasource.password=123
spring.datasource.driver-class-name=org.postgresql.Driver

# ===================================================================
# JPA / HIBERNATE Configuration
# ===================================================================
# ddl-auto options:
#   - create: Tạo tables mới (xóa dữ liệu cũ) - CHỈ DÙNG LẦN ĐẦU
#   - create-drop: Tạo & xóa khi tắt app - KHÔNG DÙNG
#   - update: Cập nhật schema - CẨN THẬN
#   - validate: CHỈ KIỂM TRA SCHEMA - AN TOÀN NHẤT (KHI CHẠY PRODUCTION)
#   - none: Không làm gì
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ===================================================================
# CONNECTION POOL - HikariCP Configuration
# ===================================================================
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.auto-commit=true

# ===================================================================
# JWT Token Configuration
# ===================================================================
# Secret key - THAY ĐỔI GIÁ TRỊ NÀY TRONG PRODUCTION
jwt.secret=MySecretKeyForKhoaCNTTManagementSystem2025VeryLongAndSecureKeyThatMustBeChangedInProduction
# Token expiration: 24 giờ (86400000 ms)
jwt.expiration=86400000
# Refresh token expiration: 7 ngày (604800000 ms)
jwt.refresh-expiration=604800000

# ===================================================================
# FILE UPLOAD Configuration
# ===================================================================
# Đường dẫn thư mục lưu avatars (relative hoặc absolute path)
file.upload-dir=uploads/avatars
# Kích thước file tối đa (10MB)
spring.servlet.multipart.max-file-size=10MB
# Kích thước request tối đa (10MB)
spring.servlet.multipart.max-request-size=10MB
# Enable multipart uploads
spring.servlet.multipart.enabled=true

# ===================================================================
# LOGGING Configuration
# ===================================================================
# Root logger level
logging.level.root=INFO
# Application logger level
logging.level.com.DACN.quanlikhoa=DEBUG
# Spring Web logger level
logging.level.org.springframework.web=DEBUG
# Spring Security logger level
logging.level.org.springframework.security=DEBUG
# Hibernate SQL logger level
logging.level.org.hibernate.SQL=DEBUG
# Hibernate bind parameter logger level
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log file configuration
logging.file.name=logs/application.log
logging.file.max-size=10MB
logging.file.max-history=10
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ===================================================================
# APPLICATION INFO
# ===================================================================
application.name=Khoa CNTT Management System
application.version=1.0.0
application.description=Hệ thống quản lý nội bộ Khoa Công nghệ Thông tin

# ===================================================================
# SPRING CONFIGURATION
# ===================================================================
spring.application.name=quanlikhoa
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# ===================================================================
# MVC Configuration
# ===================================================================
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false
spring.mvc.static-path-pattern=/static/**

# ===================================================================
# ERROR HANDLING
# ===================================================================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# ===================================================================
# ACTUATOR (Monitoring - Optional)
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ===================================================================
# END OF CONFIGURATION
# ===================================================================
# ===================================================================
# PRODUCTION PROFILE CONFIGURATION
# ===================================================================
# File: application-prod.properties
# Location: src/main/resources/application-prod.properties
# 
# Cách dùng: Chạy app với:
#   java -jar app.jar --spring.profiles.active=prod
#   hoặc environment variable: SPRING_PROFILES_ACTIVE=prod
# 
# ⚠️ THAY ĐỔI CÁC GIÁ TRỊ DƯỚI ĐÂY TRƯỚC KHI DEPLOY
# ===================================================================

# ===================================================================
# DATABASE - Production Configuration
# ===================================================================
# ⚠️ THAY ĐỔI THEO MÔI TRƯỜNG THỰC TẾ
spring.datasource.url=jdbc:postgresql://db-server:5432/khoa_cntt_db_prod
spring.datasource.username=prod_user
spring.datasource.password=CHANGE_THIS_SECURE_PASSWORD_123456

# ===================================================================
# JPA / HIBERNATE - Production
# ===================================================================
# LUÔN DÙNG 'validate' trong production - không được thay đổi schema tự động
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false

# ===================================================================
# CONNECTION POOL - Production (optimized)
# ===================================================================
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ===================================================================
# LOGGING - Production (minimal)
# ===================================================================
# Chỉ log WARNING trở lên để giảm overhead
logging.level.root=WARN
logging.level.com.DACN.quanlikhoa=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN

# Log file configuration
logging.file.name=/var/log/quanlikhoa/application.log
logging.file.max-size=100MB
logging.file.max-history=30
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ===================================================================
# SERVER - Production
# ===================================================================
server.port=8080
server.servlet.context-path=/api
# Không expose stacktrace trong production
server.error.include-stacktrace=never
server.error.include-message=never
server.error.include-exception=false

# ===================================================================
# JWT - Production
# ===================================================================
# ⚠️ THAY ĐỔI SECRET KEY - PHẢI DÀI VÀ AN TOÀN
jwt.secret=CHANGE_THIS_TO_A_VERY_LONG_AND_SECURE_SECRET_KEY_WITH_SPECIAL_CHARACTERS_!@#$%^&*()_+-=[]{}|;:',.<>?/
jwt.expiration=86400000
jwt.refresh-expiration=604800000

# ===================================================================
# FILE UPLOAD - Production
# ===================================================================
# Dùng absolute path trong production
file.upload-dir=/var/uploads/avatars

# ===================================================================
# DEVTOOLS - Production (disabled)
# ===================================================================
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# ===================================================================
# ACTUATOR - Production (secured)
# ===================================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.endpoints.web.base-path=/api/actuator

# ===================================================================
# SECURITY - Production
# ===================================================================
server.ssl.enabled=true
server.ssl.key-store=/path/to/keystore.jks
server.ssl.key-store-password=CHANGE_THIS_KEYSTORE_PASSWORD
server.ssl.key-store-type=JKS
server.ssl.key-alias=tomcat

# ===================================================================
# CORS - Production (restrict origins)
# ===================================================================
# Chỉ cho phép domain của riêng bạn
# Xem CorsConfig.java để thay đổi

# ===================================================================
# IMPORTANT CHECKLIST BEFORE DEPLOYMENT
# ===================================================================
# ✓ Thay đổi database URL
# ✓ Thay đổi database username & password
# ✓ Thay đổi JWT secret key
# ✓ Cấu hình SSL/TLS certificate
# ✓ Kiểm tra logging level
# ✓ Đảm bảo file upload directory tồn tại
# ✓ Kiểm tra CORS origins (xem CorsConfig.java)
# ✓ Cấu hình backup database
# ✓ Cấu hình monitoring
# ✓ Cấu hình security headers
# ===================================================================

# ===================================================================
# END OF PRODUCTION CONFIGURATION
# ===================================================================